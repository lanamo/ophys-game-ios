<!doctype html>
<html>
    <head>
        <meta charset="utf-8">

    <style type="text/css">
    body {
    margin:0;
    background-color: black;
    }
    
    video {
        -webkit-filter: hue-rotate(180deg) saturate(300%) brightness(120%) blur(1px);
        filter: hue-rotate(180deg) saturate(300%) brightness(120%) blur(1px);
        object-fit: cover;
        position: absolute;
        top: var(--top);
        left: var(--left);
        }
    </style>
    </head>
    
    <body>
        
        <video width="{{VID_WIDTH}}" id="{{VID_NAME}}" preload="auto" playsinline webkit-playsinline>
            <source src="{{VID_FPATH}}", type="video/mp4">
        </video>
        
        <!--<p id="ready"></p>
        <p id="ready"></p>
        <p id="rec_time"></p>
        <p id="running"></p>-->
        
        <script>
            var rec = document.getElementById("recording");
            rec.style.setProperty("--top", "{{VID_TOP}}");
            rec.style.setProperty("--left", "{{VID_LEFT}}");
            
            function initVideo(vid) {
                //vid.load();
                //vid.pause();
                var id = setInterval(wait_for_load, 2);
                function wait_for_load() {
                    if (vid.readyState !== 4) {
                        vid.play();
                        document.getElementById("running").innerHTML = 'yes';
                    } else {
                        vid.currentTime = 0;
                        vid.pause();
                        clearInterval(id);
                        document.getElementById("running").innerHTML = 'cleared';
                    }
                }
                //document.getElementById("running").innerHTML = 'start';
            }
            
            //document.getElementById("ready").innerHTML = rec;
            //document.getElementById("running").innerHTML = 'init';
            
            function update_t() {
                document.getElementById("rec_time").innerHTML = rec.currentTime;
                document.getElementById("ready").innerHTML = rec.readyState;
            }
            
        </script>
    
    </body>
    
</html>
